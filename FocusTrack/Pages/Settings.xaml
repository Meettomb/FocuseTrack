<Page x:Class="FocusTrack.Pages.Settings"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:FocusTrack.Pages"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      xmlns:controls="clr-namespace:FocusTrack.Controls"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="Settings">

    <Grid Background="#333" x:Name="MainGrid" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Padding="4" Grid.Column="0" 
                    Cursor="Hand" 
                    Margin="10 0 0 0"
                    MouseLeftButtonDown="BackIcon_MouseLeftButtonDown"
                    Background="Transparent">
                <materialDesign:PackIcon Kind="ChevronLeft"
                                         VerticalAlignment="Center"
                                         HorizontalAlignment="Center"
                                         Width="40"
                                         Height="40"
                                         Foreground="White"
                                         IsHitTestVisible="False"/>
            </Border>

            <TextBlock Text="Settings"
                       FontSize="24"
                       Foreground="White"
                       FontWeight="Bold"
                       Margin="0"
                       Grid.Column="1"
                       VerticalAlignment="Center"/>
        </Grid>

        <Grid Grid.Row="1" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Border
                    Grid.Row="0"
                    CornerRadius="10"
                    Background="#222"
                    Padding="10, 0"
                    Margin="0,5">

                <Grid
                      Height="50"
                      VerticalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0"
                               Text="Track Private Browser"
                               Foreground="White"
                               FontSize="16"
                               VerticalAlignment="Center"
                               FontWeight="Bold"/>

                    <ToggleButton x:Name="TrackPrivateModeToggle"
                                  Grid.Column="1"
                                  Margin="0 0 10 0"
                                  VerticalAlignment="Center"
                                  HorizontalAlignment="Right"
                                  Style="{StaticResource CustomSliderToggleButton}" 
                                  Checked="TrackPrivateModeToggle_Changed"
                                  Unchecked="TrackPrivateModeToggle_Changed"/>

                </Grid>
            </Border>

            <Border
                 Grid.Row="1"
                 CornerRadius="10"
                 Background="#222"
                 Padding="10, 0"
                 Margin="0, 5">

                <Grid
                   Height="50"
                   VerticalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0"
                        Text="Track VPN's"
                        Foreground="White"
                        FontSize="16"
                        VerticalAlignment="Center"
                        FontWeight="Bold"/>

                    <ToggleButton x:Name="TrackVPNToggle"
                       Grid.Column="1"
                       Margin="0 0 10 0"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Right"
                       Style="{StaticResource CustomSliderToggleButton}" 
                       Checked="TrackVPNToggle_Changed"
                       Unchecked="TrackVPNToggle_Changed"/>

                </Grid>
            </Border>


        </Grid>



  <!-- Add this transparent overlay grid for popup alerts -->
        <Popup x:Name="PrivateModeAlertPopup"
           Placement="Center"
           AllowsTransparency="True"
           StaysOpen="False"
           PopupAnimation="Fade"
           HorizontalAlignment="Center"
           VerticalAlignment="Center">

            <!-- Remove fixed width from Border so content can size naturally -->
            <Border Background="#222" CornerRadius="12" Padding="25" MinWidth="350" MinHeight="220">
                <controls:PrivateModeAlert x:Name="PrivateModeAlertControl"/>
            </Border>
        </Popup>

        <Popup x:Name="VpnAlertPopup"
               Placement="Center"
               AllowsTransparency="True"
               StaysOpen="False"
               PopupAnimation="Fade"
               HorizontalAlignment="Center"
               VerticalAlignment="Center">
            <Border Background="#222"
                    CornerRadius="12"
                    Padding="25"
                    MinWidth="350"
                    MinHeight="220">
                <controls:VpnAlert x:Name="VpnAlertControl"/>
            </Border>
        </Popup>



    </Grid>
    
    
</Page>
